<% provide(:title, t('categories')) %>
<% provide(:section, t('categories')) %>

<script type="text/javascript">//<![CDATA[
  $(window).load(function(){
    $(function () {
      $('.tree li:has(ul)').addClass('parent_li').find(' > span').attr('title', '<%= t("collapse") %>');
      $('.tree li.parent_li > span').on('click', function (e) {
        var children = $(this).parent('li.parent_li').find(' > ul > li');
        if (children.is(":visible")) {
          children.hide('fast');
          $(this).attr('title', '<%= t("expand") %>').find(' > i')
            .addClass('icon-plus-sign').removeClass('icon-minus-sign');
        } else {
          children.show('fast');
          $(this).attr('title', '<%= t("collapse") %>').find(' > i')
            .addClass('icon-minus-sign').removeClass('icon-plus-sign');
        }
        e.stopPropagation();
      });
    });
  });//]]>
</script>

<div class="tree">
    <ul>
        <%= tree_view Category.scoped.arrange(:order => :name) %>
    </ul>
</div>